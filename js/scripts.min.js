!function(h){"use strict";var p=main_data.debug;h(window).on("load",function(){var t=h("#placeholder__content"),e=h("#placeholder__gallery");t.addClass("action").remove(),e.remove(),h("body").removeClass("placeholder__preloading"),h(".archive-view").length&&(t=h(localStorage.getItem("hash")),e=h(window).height(),localStorage.getItem("hash")&&t.length&&(e<(e=t.offset().top)?h("html, body").animate({scrollTop:e},1):h("html, body").animate({scrollTop:0},1,function(){h(".main-navigation").removeClass("hide-menu")})),localStorage.removeItem("hash")),(h("body.archive-portfolio:not(.astrodj-full-portfolio)").length||h("body.archive-stock:not(.astrodj-full-portfolio)").length)&&(t=h(localStorage.getItem("portfolio-hash")),e=h(window).height(),localStorage.getItem("portfolio-hash")&&t.length&&(e<(e=t.offset().top)?h("html, body").animate({scrollTop:e},1):h("html, body").animate({scrollTop:0},1)),localStorage.removeItem("portfolio-hash"))}),h(document).ready(function(){var t=h(".content-area").width(),e=h(".site-main").width(),a=h(".widget-area").innerWidth(),r=(h("body").width(),h("#menu-toggle").on("click",function(){h("body").addClass("opened-sidebar"),768<h(document).width()&&h(".site").css({transform:"translateX("+(a-(t-e)/2)+"px)"})}),h(".sidebar-overlay-layer").on("click",function(){h("body").removeClass("opened-sidebar"),768<h(document).width()&&h(".site").attr("style","")}),h(".site-header").height()),l=h(".main-navigation").height(),d=h(".single-post .main-navigation");function o(t,e){var o,n=h.extend({},{domObj:t,className:"small-menu",position:"100px",onIntellingenceMenu:function(){},onNormalMenu:function(){}},e),i=function(){n.domObj.hasClass(n.className)&&n.domObj.removeClass(n.className)},s=function(){n.domObj.hasClass(n.className)||n.domObj.addClass(n.className)};return{intelligent_menu:function(){var e,a=0;null!=o&&h(window).unbind("scroll",o),o=function(t){e=t.currentTarget.scrollY>a?"down":"up",a=t.currentTarget.scrollY,(h(window).scrollTop()>r+2*l&&!d.length||d.length&&h(window).scrollTop()>h(".hentry").offset().top+l)&&("up"==e?i:s)()},h(window).on("scroll",o),n.onNormalMenu()},fixed_menu:function(){null!=o&&h(window).unbind("scroll",o),o=function(t){i()},h(window).on("scroll",o),n.onNormalMenu()}}}h.fn.menu=function(t){return new o(this.first(),t)};var n,i=h(".main-navigation").menu({className:"hide-menu",position:"100px"});function s(){var n,t=[].slice.call(document.querySelectorAll("img.lazy"));"IntersectionObserver"in window&&(n=new IntersectionObserver(function(t,e){t.forEach(function(t){var e,a,o;t.isIntersecting&&(t=(e=t.target).closest(".astrodj-lqip__wrap").previousElementSibling,a=t.firstElementChild,o=e.closest(".astrodj-lqip"),t.classList.add("bg"),setTimeout(function(){a.classList.add("visible"),e.alt=o.hasAttribute("data-alt")?o.dataset.alt:"",e.src=o.dataset.src,e.srcset=o.hasAttribute("data-srcset")?o.dataset.srcset:"",e.sizes=o.hasAttribute("data-sizes")?o.dataset.sizes:"",e.addEventListener("load",function(t){t.target.classList.add("visible")}),n.unobserve(e)},300))})},{threshold:.25}),t.forEach(function(t){n.observe(t)})),h("img.lazy").each(function(t){var e=parseInt(h(this).attr("width")),a=parseInt(h(this).attr("height")),a=a<e?100/(e/a):100*(a/e);h(this).parents(".astrodj-lqip__wrap").prevAll(".aspect-ratio-fill").attr("style","padding-bottom: "+a+"%;width: 100%;")})}(window.menuFun=i).intelligent_menu(),h(".fancybox").fancybox(),s(),h(".fullpage-post-portfolio.vertical").length&&(i=h("img.placeholder").attr("width"),h(this).find("img.placeholder").css({"max-width":i+"px"})),h(document).width()<576||(i=document.getElementById("bgLazy"),"IntersectionObserver"in window&&void 0!==i&&null!=i&&(n=new IntersectionObserver(function(t,e){t.forEach(function(t){var e;t.isIntersecting&&(t=t.target,(e=document.createAttribute("style")).value="background-image: url("+t.dataset.src+");",t.setAttributeNode(e),n.unobserve(t))})})).observe(i)),h().fancybox({selector:"[data-portfolio]",toolbar:!1,arrows:!1,infobar:!1,iframe:{css:{width:"90vw",maxHeight:"90vh"}},spinnerTpl:'<div class="lds-ring"><div></div><div></div><div></div><div></div></div>',afterLoad:function(t,e){0==h(".fancybox-content .ajax-loader").length&&h("iframe").before('<div class="ajax-loader"></div><div class="iframe__overlay"></div>')},afterShow:function(t,e){h(".fancybox-content .ajax-loader").fadeOut(500),h(".fancybox-content .iframe__overlay").fadeOut(500)}});h(".astrodj-iframe-portfolio .nav-links a").on("click",function(t){h(parent.document).find(".ajax-loader").fadeIn(500),h(parent.document).find(".iframe__overlay").fadeIn(500)}),h(document).on("click",".astrodj-post-navigation .entry-title a, .astrodj-post-navigation .post-thumbnail-header a",function(){var t=h(this),e=t.data("id"),t=t.data("blog_page"),a=main_data.site_url,e="#post-"+e,a=1==t?a+"blog/":a+"blog/page/"+t+"/";history.replaceState(null,null,a),localStorage.setItem("hash",e)}),h(document).on("click","body.astrodj-full-portfolio .astrodj-portfolio a, body.astrodj-full-portfolio .nav-links a, body.archive-portfolio .astrodj-portfolio a, body.archive-stock .astrodj-portfolio a",function(){var t=h(this).data("hash-id");localStorage.setItem("portfolio-hash","#post-"+t)});var c=document.querySelector(".dropdown-button"),u=document.querySelector(".dropdown-menu__wrapper"),m=null;function f(t){var e=main_data.ajax_url,a=h(".subpage-content-wrapper");h.ajax({url:e,type:"post",data:{link:t,action:"astrodj_subpages_navigation"},beforeSend:function(){a.animate({opacity:0},300)},success:function(t){a.html(t).animate({opacity:1},300),s(),h(".fancybox").fancybox(),p&&console.log("Ajax Subpages Navigation")},error:function(t,e,a){p&&console.log("error Subpages Navigation: "+a)}})}h(".dropdown-button").on("click",function(t){t.stopPropagation(),h(".dropdown-menu__wrapper").toggleClass("visible"),m=Popper.createPopper(c,u,{modifiers:[{name:"offset",options:{offset:[0,8]}}]})}),h(window).on("click",function(){h(".dropdown-menu__wrapper").removeClass("visible"),m&&(m.destroy(),m=null)}),h("#contact-form").on("submit",function(t){t.preventDefault();var e=h(this),t=e.find("#name").val(),a=e.find("#email").val(),o=e.find("#message").val(),n=e.parent().prev(".form__data"),i=main_data.ajax_url;h("#formHelp").html("Подождите, письмо отправляется..."),e.find(".form-footer").html(""),h.ajax({type:"post",url:i,data:{name:t,email:a,message:o,action:"astrodj_contact_form"},error:function(t){p&&console.log(t)},success:function(t){0!==t&&(n.show().prepend(t),h("html, body").animate({scrollTop:n.offset().top+n.height()/2-h(window).height()/2},300,"swing"))}}).done(function(){e.find(".form-control").val("").removeClass("success"),e.trigger("reset"),e.find("#formHelp").addClass("hidden").removeClass("success").html("Все поля обязательны для заполнения")})}),h("#contact-form :input[required]").on("keyup blur",function(){var t=h(this).next(),e=h(this).prev().text(),a=h(this).attr("pattern"),o=h(this).attr("placeholder"),a=void 0!==a&&!1!==a?h(this).attr("pattern"):h(this).attr("data-pattern"),a=(h("#formHelp").addClass("hidden"),t.removeClass("error"),h(this).removeClass("error").addClass("success"),0<=h(this).val().search(a)||(h(this).removeClass("success").addClass("error"),t.addClass("error").html("Введите правильный формат: "+o)),""===h(this).val()&&(h(this).removeClass("success").addClass("error"),t.addClass("error").html('Поле "'+e+'" обязательно')),document.contactForm);t=function(t){if(""===t)return!1;return!!/^[А-Яа-яA-Za-z ]+\s?[А-Яа-яA-Za-z ]*$/.test(t.trim())&&""}((o=a).name.value),""===(t=(t+=function(t){if(""===t)return!1;return!!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t.trim())&&""}(o.email.value))+function(t){if(""===t)return!1;return!!/^\s*[А-Яа-яA-Za-z0-9\.ёЁ]{3,}\.*/.test(t.trim())&&""}(o.message.value))?(h("#formHelp").removeClass("hidden").addClass("success").html("Можно отправлять!"),h("#contact-form button").length||h("#contact-form").find(".form-footer").html('<button type="submit" class="btn btn-submit" name="submit" value="submit">Отправить</button>')):h("#contact-form").find(".form-footer").html("")}),h(document).on("click",".subpages-navigation a",function(t){t.preventDefault();var t=h(this).attr("href"),e=h(this).text(),a=h(this).parent(),o=main_data.site_name;sessionStorage.setItem("subpage_prev_title",document.title),history.pushState(null,null,t),document.title=e+" — "+o,a.addClass("current-menu-item").siblings(".current-menu-item").removeClass("current-menu-item"),f(t)}),window.addEventListener("popstate",function(t){document.title=sessionStorage.getItem("subpage_prev_title"),sessionStorage.setItem("subpage_prev_title",document.title),h(".subpages-navigation a").each(function(){location.pathname===h(this)[0].pathname&&h(this).parent().addClass("current-menu-item").siblings(".current-menu-item").removeClass("current-menu-item")}),main_data.is_singular&&f(location.href)},!1)})}(jQuery),/(trident|msie)/i.test(navigator.userAgent)&&document.getElementById&&window.addEventListener&&window.addEventListener("hashchange",function(){var t=location.hash.substring(1);/^[A-z0-9_-]+$/.test(t)&&(t=document.getElementById(t))&&(/^(?:a|select|input|button|textarea)$/i.test(t.tagName)||(t.tabIndex=-1),t.focus())},!1);